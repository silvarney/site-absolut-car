---
// Componente de Carousel de Serviços
---

<section id="principais-servicos" class="py-16 text-center" aria-labelledby="servicos-title">
	<div class="max-w-6xl mx-auto px-5">
		<h2 id="servicos-title" class="mb-8 font-semibold text-gray-800 text-3xl">Principais Serviços</h2>
		<div class="relative max-w-full overflow-hidden mx-auto carousel-container" role="region" aria-label="Carousel de serviços" aria-live="polite">
			<button class="absolute top-1/2 -translate-y-1/2 bg-primary text-white border-none rounded-full w-10 h-10 text-lg flex items-center justify-center cursor-pointer z-10 transition-colors duration-300 hover:bg-orange-700 left-0 prev-btn" aria-label="Serviço anterior" type="button">❮</button>
			<div class="flex transition-transform duration-500 gap-5 py-2 servicos-carousel" role="list">
				<div class="min-w-[180px] bg-white rounded-lg p-5 shadow-md transition-all duration-300 flex-shrink-0 text-center hover:-translate-y-1 hover:shadow-lg hover:bg-primary hover:text-white group servico-card" role="listitem">
					<div class="flex flex-col items-center mb-4">
						<div class="w-16 h-16 flex items-center justify-center text-4xl mb-2 text-primary group-hover:text-white" aria-hidden="true">
				<svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
					<path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"/>
				</svg>
			</div>
					</div>
					<h3 class="mb-2 text-gray-800 font-semibold group-hover:text-white">Revisão</h3>
				</div>
				<div class="min-w-[180px] bg-white rounded-lg p-5 shadow-md transition-all duration-300 flex-shrink-0 text-center hover:-translate-y-1 hover:shadow-lg hover:bg-primary hover:text-white group servico-card" role="listitem">
					<div class="flex flex-col items-center mb-4">
						<div class="w-16 h-16 flex items-center justify-center text-4xl mb-2 text-primary group-hover:text-white" aria-hidden="true">
				<svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
					<path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"/>
				</svg>
			</div>
					</div>
					<h3 class="mb-2 text-gray-800 font-semibold group-hover:text-white">Manutenção</h3>
				</div>
				<div class="min-w-[180px] bg-white rounded-lg p-5 shadow-md transition-all duration-300 flex-shrink-0 text-center hover:-translate-y-1 hover:shadow-lg hover:bg-primary hover:text-white group servico-card" role="listitem">
					<div class="flex flex-col items-center mb-4">
						<div class="w-16 h-16 flex items-center justify-center text-4xl mb-2 text-primary group-hover:text-white" aria-hidden="true">
				<svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
					<path d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"/>
				</svg>
			</div>
					</div>
					<h3 class="mb-2 text-gray-800 font-semibold group-hover:text-white">Freios</h3>
				</div>
				<div class="min-w-[180px] bg-white rounded-lg p-5 shadow-md transition-all duration-300 flex-shrink-0 text-center hover:-translate-y-1 hover:shadow-lg hover:bg-primary hover:text-white group servico-card" role="listitem">
					<div class="flex flex-col items-center mb-4">
						<div class="w-16 h-16 flex items-center justify-center text-4xl mb-2 text-primary group-hover:text-white" aria-hidden="true">
				<svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
					<path d="M12,11A1,1 0 0,0 13,12A1,1 0 0,0 12,13A1,1 0 0,0 11,12A1,1 0 0,0 12,11M12.5,2C13,2 13.5,2.19 13.9,2.6L22.3,11C22.7,11.4 22.9,11.9 22.9,12.4C22.9,12.9 22.7,13.4 22.3,13.8L13.9,22.2C13.5,22.6 13,22.8 12.5,22.8C12,22.8 11.5,22.6 11.1,22.2L2.7,13.8C2.3,13.4 2.1,12.9 2.1,12.4C2.1,11.9 2.3,11.4 2.7,11L11.1,2.6C11.5,2.19 12,2 12.5,2M12,4.8L6.6,10.2L6.6,14.6L12,20L17.4,14.6L17.4,10.2L12,4.8Z"/>
				</svg>
			</div>
					</div>
					<h3 class="mb-2 text-gray-800 font-semibold group-hover:text-white">Ar Condicionado</h3>
				</div>
				<div class="min-w-[180px] bg-white rounded-lg p-5 shadow-md transition-all duration-300 flex-shrink-0 text-center hover:-translate-y-1 hover:shadow-lg hover:bg-primary hover:text-white group servico-card" role="listitem">
					<div class="flex flex-col items-center mb-4">
						<div class="w-16 h-16 flex items-center justify-center text-4xl mb-2 text-primary group-hover:text-white" aria-hidden="true">
				<svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
					<path d="M5,11L6.5,6.5H17.5L19,11M17.5,16A1.5,1.5 0 0,1 16,14.5A1.5,1.5 0 0,1 17.5,13A1.5,1.5 0 0,1 19,14.5A1.5,1.5 0 0,1 17.5,16M6.5,16A1.5,1.5 0 0,1 5,14.5A1.5,1.5 0 0,1 6.5,13A1.5,1.5 0 0,1 8,14.5A1.5,1.5 0 0,1 6.5,16M18.92,6C18.72,5.42 18.16,5 17.5,5H6.5C5.84,5 5.28,5.42 5.08,6L3,12V20A1,1 0 0,0 4,21H5A1,1 0 0,0 6,20V19H18V20A1,1 0 0,0 19,21H20A1,1 0 0,0 21,20V12L18.92,6Z"/>
				</svg>
			</div>
					</div>
					<h3 class="mb-2 text-gray-800 font-semibold group-hover:text-white">Alinhamento</h3>
				</div>
				<div class="min-w-[180px] bg-white rounded-lg p-5 shadow-md transition-all duration-300 flex-shrink-0 text-center hover:-translate-y-1 hover:shadow-lg hover:bg-primary hover:text-white group servico-card" role="listitem">
					<div class="flex flex-col items-center mb-4">
						<div class="w-16 h-16 flex items-center justify-center text-4xl mb-2 text-primary group-hover:text-white" aria-hidden="true">
				<svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
					<path d="M12,2A3,3 0 0,1 15,5V8H22L20,10V16A2,2 0 0,1 18,18H6A2,2 0 0,1 4,16V10L2,8H9V5A3,3 0 0,1 12,2M12,4A1,1 0 0,0 11,5V8H13V5A1,1 0 0,0 12,4Z"/>
				</svg>
			</div>
					</div>
					<h3 class="mb-2 text-gray-800 font-semibold group-hover:text-white">Troca de Óleo</h3>
				</div>
			</div>
			<button class="absolute top-1/2 -translate-y-1/2 bg-primary text-white border-none rounded-full w-10 h-10 text-lg flex items-center justify-center cursor-pointer z-10 transition-colors duration-300 hover:bg-orange-700 right-0 next-btn" aria-label="Próximo serviço" type="button">❯</button>
		</div>
		<div class="flex justify-center mt-5 gap-2" role="tablist" aria-label="Indicadores do carousel">
			<button class="w-2 h-2 rounded-full bg-primary cursor-pointer transition-colors duration-300 dot active" data-index="0" role="tab" aria-selected="true" aria-label="Ir para página 1"></button>
			<button class="w-2 h-2 rounded-full bg-gray-300 cursor-pointer transition-colors duration-300 dot" data-index="1" role="tab" aria-selected="false" aria-label="Ir para página 2"></button>
			<button class="w-2 h-2 rounded-full bg-gray-300 cursor-pointer transition-colors duration-300 dot" data-index="2" role="tab" aria-selected="false" aria-label="Ir para página 3"></button>
			<button class="w-2 h-2 rounded-full bg-gray-300 cursor-pointer transition-colors duration-300 dot" data-index="3" role="tab" aria-selected="false" aria-label="Ir para página 4"></button>
		</div>
	</div>
</section>

<script>
	document.addEventListener('DOMContentLoaded', function() {
		// Carousel functionality
		const carousel = document.querySelector('.servicos-carousel');
		const cards = document.querySelectorAll('.servico-card');
		const prevBtn = document.querySelector('.prev-btn');
		const nextBtn = document.querySelector('.next-btn');
		const dots = document.querySelectorAll('.dot');

		let currentIndex = 0;
		let cardWidth = cards[0].offsetWidth + 20; // Card width + gap
		let cardsPerView = Math.floor(carousel.offsetWidth / cardWidth);
		let maxIndex = cards.length - cardsPerView;

		// Recalculate on window resize
		window.addEventListener('resize', function() {
			cardWidth = cards[0].offsetWidth + 20;
			cardsPerView = Math.floor(carousel.offsetWidth / cardWidth);
			maxIndex = Math.max(0, cards.length - cardsPerView);
			
			// Ensure current index is valid after resize
			if (currentIndex > maxIndex) {
				currentIndex = maxIndex;
				updateCarousel();
			}
		});

		// Update carousel position
		function updateCarousel() {
			carousel.style.transform = `translateX(-${currentIndex * cardWidth}px)`;
			
			// Update dots
			dots.forEach((dot, index) => {
				dot.classList.toggle('active', Math.floor(index * maxIndex / (dots.length - 1)) === currentIndex);
			});
			
			// Enable/disable buttons
			prevBtn.disabled = currentIndex === 0;
			nextBtn.disabled = currentIndex === maxIndex;
			prevBtn.style.opacity = currentIndex === 0 ? '0.5' : '1';
			nextBtn.style.opacity = currentIndex === maxIndex ? '0.5' : '1';
		}

		// Button click handlers
		prevBtn.addEventListener('click', function() {
			if (currentIndex > 0) {
				currentIndex--;
				updateCarousel();
			}
		});

		nextBtn.addEventListener('click', function() {
			if (currentIndex < maxIndex) {
				currentIndex++;
				updateCarousel();
			}
		});

		// Dot click handlers
		dots.forEach((dot, index) => {
			dot.addEventListener('click', function() {
				currentIndex = Math.min(maxIndex, Math.floor(index * maxIndex / (dots.length - 1)));
				updateCarousel();
			});
		});

		// Touch support
		let touchStartX = 0;
		let touchEndX = 0;

		carousel.addEventListener('touchstart', function(e) {
			touchStartX = e.changedTouches[0].screenX;
		});

		carousel.addEventListener('touchend', function(e) {
			touchEndX = e.changedTouches[0].screenX;
			handleSwipe();
		});

		function handleSwipe() {
			const swipeThreshold = 50;
			if (touchEndX < touchStartX - swipeThreshold && currentIndex < maxIndex) {
				// Swipe left
				currentIndex++;
				updateCarousel();
			} else if (touchEndX > touchStartX + swipeThreshold && currentIndex > 0) {
				// Swipe right
				currentIndex--;
				updateCarousel();
			}
		}

		// Initialize
		updateCarousel();

		// Auto slide every 5 seconds
		setInterval(function() {
			if (currentIndex < maxIndex) {
				currentIndex++;
			} else {
				currentIndex = 0;
			}
			updateCarousel();
		}, 5000);
	});
</script>

<style>
	/* Dot active state for carousel */
	.dot.active {
		background-color: #ff6600 !important;
	}
</style>